(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{5624:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/profile",function(){return n(5711)}])},5711:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(5893),l=n(8583),i=n(9008),s=n.n(i),r=n(7294),c=n(5371),o=n(4764),u=n(3356),d=n.n(u),h=e=>{let{label:t,type:n="text",name:l,value:i,onChange:s,className:r}=e;return"textarea"===n?(0,a.jsxs)("label",{children:[t,":",(0,a.jsx)("textarea",{name:l,onChange:s,value:i,className:r})]}):(0,a.jsxs)("label",{children:[t,":",(0,a.jsx)("input",{type:n,name:l,onChange:s,value:i,className:r})]})},x=()=>{var e;let[t]=(0,l.KO)(c.L),[n,i]=(0,r.useState)({githubId:"",userName:"",realName:"",displayName:"",graduateYear:0,updateAt:Date.now(),introduction:"",products:[],socialLinks:[]}),s=e=>{let{name:t,value:n,type:a}=e.target,l=e.target.scrollHeight;e.target.style.height="".concat(l,"px"),i(e=>({...e,[t]:"number"===a?Number(n):n}))},u=(e,t,a)=>{let l=[...n.products||[]];l[e][t]=a,i(e=>({...e,products:l}))},x=(e,t)=>{let a=[...n.socialLinks||[]];a[e]=t,i(e=>({...e,socialLinks:a}))},m=e=>{let t=[...n.products||[]];t.splice(e,1),i(e=>({...e,products:t}))},p=e=>{let t=[...n.socialLinks||[]];t.splice(e,1),i(e=>({...e,socialLinks:t}))},b=async()=>{console.log(n);let e=await o.x.members.$post({body:n});null===e&&alert("保存に失敗しました"),alert("保存しました")};return(0,r.useEffect)(()=>{(null==t?void 0:t.githubId)!==void 0&&i(e=>({...e,githubId:t.githubId}))},[t]),(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsx)("h2",{children:"Edit Profile"}),(0,a.jsx)(h,{label:"User Name",name:"userName",value:n.userName,onChange:s,className:d().input}),(0,a.jsx)(h,{label:"Real Name",name:"realName",value:n.realName,onChange:s,className:d().input}),(0,a.jsx)(h,{label:"Display Name",name:"displayName",value:n.displayName,onChange:s,className:d().input}),(0,a.jsx)(h,{label:"Graduate Year",name:"graduateYear",type:"number",value:n.graduateYear,onChange:s,className:d().input}),(0,a.jsx)(h,{label:"Introduction",name:"introduction",type:"textarea",value:n.introduction,onChange:s,className:d().input}),(0,a.jsx)("h3",{children:"Products"}),(0,a.jsx)("button",{className:d().button,onClick:()=>{i(e=>({...e,products:[...e.products||[],{title:"",description:"",url:""}]}))},children:"追加"}),null===(e=n.products)||void 0===e?void 0:e.map((e,t)=>(0,a.jsxs)("div",{className:d().productInfo,children:[(0,a.jsx)(h,{label:"Title",name:"title",value:e.title,className:d().input,onChange:e=>u(t,"title",e.target.value)}),(0,a.jsx)(h,{label:"Description",type:"textarea",className:d().input,value:e.description,onChange:e=>u(t,"description",e.target.value)}),(0,a.jsx)(h,{label:"URL",className:d().input,onChange:s,value:e.url}),(0,a.jsx)("button",{onClick:()=>m(t),className:d().button,children:"削除"})]},t)),(0,a.jsx)("h3",{children:"Social Links"}),(0,a.jsx)("button",{className:d().button,onClick:()=>{i(e=>({...e,socialLinks:[...e.socialLinks||[],""]}))},children:"追加"}),(n.socialLinks||[]).map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{label:"Link",className:d().input,value:e,onChange:e=>x(t,e.target.value)}),(0,a.jsx)("button",{onClick:()=>p(t),className:d().button,children:"削除"})]},t)),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"\n          ".concat(d().button,"\n          ").concat(d().buttonSubmit,"\n        "),onClick:b,children:"決定"})})]})},m=n(5586),p=n.n(m),b=()=>{let[e]=(0,l.KO)(c.L),[t,n]=(0,r.useState)(),i=(0,r.useCallback)(async()=>{if(null!==e){let t=await o.x.members._memberId(e.githubId).$get();if(null!==t){n(t);return}alert("Member情報がありません")}},[e]);return(0,r.useEffect)(()=>{i()},[i,e]),(0,a.jsxs)("div",{className:p().container,children:[(0,a.jsx)(s(),{children:(0,a.jsx)("title",{children:"EditMemberInfo | INIAD.ts"})}),(0,a.jsx)("h2",{children:"YourProfile"}),(0,a.jsx)("div",{className:p().plafileTable,children:(0,a.jsx)("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"githubId:"}),(0,a.jsx)("td",{children:null==t?void 0:t.githubId})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"displayName:"}),(0,a.jsx)("td",{children:null==t?void 0:t.displayName})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"avatarURL:"}),(0,a.jsx)("td",{children:null==t?void 0:t.avatarUrl})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"graduateYear:"}),(0,a.jsx)("td",{children:null==t?void 0:t.graduateYear})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"introduction:"}),(0,a.jsx)("td",{children:null==t?void 0:t.introduction})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"links:"}),(0,a.jsx)("td",{children:null==t?void 0:t.socialLinks})]})]})})}),(0,a.jsx)(x,{})]})}},3356:function(e){e.exports={container:"EditProfile_container__R1Fam",productInfo:"EditProfile_productInfo__dACI_",input:"EditProfile_input__953Pe",button:"EditProfile_button__EvNyM",buttonSubmit:"EditProfile_buttonSubmit__VLaWA"}},5586:function(e){e.exports={container:"profile_container__aevgF",plafileTable:"profile_plafileTable__WvpyW"}},9008:function(e,t,n){e.exports=n(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5624)}),_N_E=e.O()}]);